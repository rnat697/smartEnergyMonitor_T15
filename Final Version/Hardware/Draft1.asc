Version 4
SHEET 1 3316 1548
WIRE 2784 80 2640 80
WIRE 688 96 544 96
WIRE 880 96 688 96
WIRE 1136 96 880 96
WIRE 1376 96 1136 96
WIRE 1456 96 1440 96
WIRE 1568 96 1536 96
WIRE 1600 96 1568 96
WIRE 1680 96 1600 96
WIRE 2016 96 1936 96
WIRE 2176 96 2016 96
WIRE 2288 96 2176 96
WIRE 2528 96 2288 96
WIRE 880 128 880 96
WIRE 2528 128 2528 96
WIRE 1136 144 1136 96
WIRE -176 160 -240 160
WIRE -32 160 -112 160
WIRE 2640 192 2640 80
WIRE 2672 192 2640 192
WIRE 2288 208 2288 96
WIRE 2784 208 2784 80
WIRE 2784 208 2736 208
WIRE 2832 208 2784 208
WIRE 2528 224 2528 208
WIRE 2624 224 2528 224
WIRE 2672 224 2624 224
WIRE -240 240 -240 160
WIRE -176 240 -240 240
WIRE -32 240 -32 160
WIRE -32 240 -96 240
WIRE 544 240 544 96
WIRE 880 240 880 208
WIRE 1600 256 1600 96
WIRE 2016 256 2016 96
WIRE 2528 272 2528 224
WIRE 1136 288 1136 224
WIRE 1232 288 1136 288
WIRE -368 352 -416 352
WIRE -240 352 -240 240
WIRE -240 352 -288 352
WIRE -192 352 -240 352
WIRE 1136 352 1136 288
WIRE -192 368 -192 352
WIRE -160 368 -192 368
WIRE -32 384 -32 240
WIRE -32 384 -96 384
WIRE 0 384 -32 384
WIRE 144 384 80 384
WIRE 272 384 144 384
WIRE 880 384 880 320
WIRE 960 384 880 384
WIRE 1008 384 960 384
WIRE -160 400 -192 400
WIRE -368 416 -480 416
WIRE -240 416 -288 416
WIRE -192 416 -192 400
WIRE -192 416 -240 416
WIRE 544 480 544 320
WIRE 704 480 544 480
WIRE 880 480 880 464
WIRE 880 480 704 480
WIRE 960 480 960 464
WIRE 960 480 880 480
WIRE 1136 480 1136 432
WIRE 1136 480 960 480
WIRE 1328 480 1136 480
WIRE 1600 480 1600 320
WIRE 1600 480 1328 480
WIRE 1808 480 1808 192
WIRE 1808 480 1600 480
WIRE 2016 480 2016 320
WIRE 2016 480 1808 480
WIRE 2288 480 2288 288
WIRE 2288 480 2016 480
WIRE 2528 480 2528 352
WIRE 2528 480 2288 480
WIRE 144 496 144 448
WIRE 1328 496 1328 480
WIRE -192 512 -192 496
WIRE -240 528 -240 480
WIRE -208 720 -304 720
WIRE -64 720 -144 720
WIRE -304 816 -304 720
WIRE -208 816 -304 816
WIRE -64 816 -64 720
WIRE -64 816 -128 816
WIRE 864 832 656 832
WIRE 1120 848 928 848
WIRE 864 864 768 864
WIRE 768 896 768 864
WIRE 896 896 896 880
WIRE -448 960 -480 960
WIRE -304 960 -304 816
WIRE -304 960 -368 960
WIRE -224 960 -304 960
WIRE -224 976 -224 960
WIRE -192 976 -224 976
WIRE -64 992 -64 816
WIRE -64 992 -128 992
WIRE 0 992 -64 992
WIRE 128 992 80 992
WIRE 224 992 128 992
WIRE -192 1008 -224 1008
WIRE -448 1024 -480 1024
WIRE -304 1024 -368 1024
WIRE -224 1024 -224 1008
WIRE -224 1024 -304 1024
WIRE 128 1024 128 992
WIRE -224 1040 -224 1024
WIRE -304 1056 -304 1024
WIRE 864 1072 656 1072
WIRE 1120 1088 928 1088
WIRE 864 1104 768 1104
WIRE 128 1120 128 1088
WIRE -224 1136 -224 1120
WIRE 768 1136 768 1104
WIRE 896 1136 896 1120
WIRE -304 1152 -304 1120
FLAG 704 480 0
FLAG 688 96 Vac
FLAG 128 1120 0
FLAG -128 416 0
FLAG -416 352 0
FLAG -192 512 2V1
FLAG -160 1024 0
FLAG -160 960 5VDis
FLAG -480 960 0
FLAG -224 1136 2V1
FLAG 2176 96 5VDis
FLAG 1568 96 Vin
FLAG 1328 496 0
FLAG 1008 384 Vis
FLAG 144 496 0
FLAG 1120 848 Vout
FLAG 768 896 VvsOUT
FLAG -480 416 Vis
FLAG 272 384 VisOUT
FLAG 224 992 VvsOUT
FLAG -480 1024 Vvs
FLAG 896 816 5VDis
FLAG 896 896 0
FLAG 656 832 2V1
FLAG 1120 1088 Vout2
FLAG 768 1136 VisOUT
FLAG 896 1056 5VDis
FLAG 896 1136 0
FLAG 656 1072 2V1
FLAG 2832 208 2V1
FLAG 1232 288 Vvs
FLAG 2704 176 5VDis
FLAG 2704 240 0
FLAG 2624 288 0
FLAG -304 1152 0
FLAG -240 528 0
FLAG -128 352 5VDis
SYMBOL voltage 544 224 R0
WINDOW 0 24 96 Left 2
WINDOW 3 22 124 Left 2
WINDOW 123 22 152 Left 2
WINDOW 39 0 0 Left 0
SYMATTR InstName Vsupply1
SYMATTR Value SINE(0 21.78 500)
SYMATTR Value2 AC 1
SYMBOL res 864 224 R0
SYMATTR InstName Rload1
SYMATTR Value 17
SYMBOL ind 864 112 R0
SYMATTR InstName Lload1
SYMATTR Value 4mH
SYMBOL res 864 368 R0
SYMATTR InstName Rs1
SYMATTR Value 1
SYMBOL res 1120 128 R0
SYMATTR InstName R1a
SYMATTR Value 56k
SYMBOL res 1120 336 R0
SYMATTR InstName R1b
SYMATTR Value 2.7k
SYMBOL res 96 976 R90
WINDOW 0 62 55 VBottom 2
WINDOW 3 61 57 VTop 2
SYMATTR InstName Rf1
SYMATTR Value 1k
SYMBOL cap 144 1088 R180
WINDOW 0 29 13 Left 2
WINDOW 3 33 -11 Left 2
SYMATTR InstName Cf1
SYMATTR Value 15.915n
SYMBOL Opamps/opamp2 -128 320 R0
WINDOW 0 23 81 Left 2
WINDOW 3 24 105 Left 2
SYMATTR InstName U1
SYMATTR Value LM324
SYMBOL res -272 400 R90
WINDOW 0 62 62 VBottom 2
WINDOW 3 61 57 VTop 2
SYMATTR InstName R1
SYMATTR Value 3.3k
SYMBOL res -272 336 R90
WINDOW 0 -32 53 VBottom 2
WINDOW 3 -32 55 VTop 2
SYMATTR InstName R2
SYMATTR Value 3.3k
SYMBOL res -80 224 R90
WINDOW 0 14 99 VBottom 2
WINDOW 3 18 94 VTop 2
SYMATTR InstName R3
SYMATTR Value 6.8k
SYMBOL res -176 512 R180
WINDOW 0 -36 50 Left 2
WINDOW 3 -42 30 Left 2
SYMATTR InstName R4
SYMATTR Value 6.8k
SYMBOL Opamps/opamp2 -160 928 R0
WINDOW 0 23 81 Left 2
WINDOW 3 24 105 Left 2
SYMATTR InstName U2
SYMATTR Value LM324
SYMBOL res -352 1008 R90
WINDOW 0 62 55 VBottom 2
WINDOW 3 61 57 VTop 2
SYMATTR InstName R5
SYMATTR Value 4.4k
SYMBOL res -352 944 R90
WINDOW 0 -32 53 VBottom 2
WINDOW 3 -32 55 VTop 2
SYMATTR InstName R6
SYMATTR Value 6.8k
SYMBOL res -112 800 R90
WINDOW 0 13 105 VBottom 2
WINDOW 3 16 100 VTop 2
SYMATTR InstName R7
SYMATTR Value 6.8k
SYMBOL res -208 1136 R180
WINDOW 0 -62 57 Left 2
WINDOW 3 -44 34 Left 2
SYMATTR InstName R8
SYMATTR Value 6.8k
SYMBOL PowerProducts/LT1085-5 1808 96 R0
SYMATTR InstName Reg1
SYMBOL res 2272 192 R0
SYMATTR InstName RL1
SYMATTR Value 100
SYMBOL res 1552 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rin1
SYMATTR Value 33
SYMBOL diode 1376 112 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL cap 1584 256 R0
SYMATTR InstName Cin1
SYMATTR Value 47µ
SYMATTR SpiceLine Rser=0.001
SYMBOL cap 2000 256 R0
SYMATTR InstName Cout1
SYMATTR Value 10µ
SYMATTR SpiceLine Rser=0.001
SYMBOL res 944 368 R0
SYMATTR InstName Rs2
SYMATTR Value 1
SYMBOL res 96 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rf2
SYMATTR Value 1k
SYMBOL cap 128 384 R0
SYMATTR InstName Cf3
SYMATTR Value 15.915n
SYMBOL Opamps/opamp2 896 784 R0
WINDOW 0 23 81 Left 2
WINDOW 3 24 105 Left 2
SYMATTR InstName U5
SYMATTR Value LM324
SYMBOL Opamps/opamp2 896 1024 R0
WINDOW 0 23 81 Left 2
WINDOW 3 24 105 Left 2
SYMATTR InstName U3
SYMATTR Value LM324
SYMBOL Opamps/opamp2 2704 144 R0
WINDOW 0 23 81 Left 2
WINDOW 3 24 105 Left 2
SYMATTR InstName U4
SYMATTR Value LM324
SYMBOL res 2512 112 R0
SYMATTR InstName R13
SYMATTR Value 39k
SYMBOL res 2512 256 R0
SYMATTR InstName R15
SYMATTR Value 27k
SYMBOL cap 2608 224 R0
SYMATTR InstName C2
SYMATTR Value 10n
SYMBOL cap -288 1120 R180
WINDOW 0 29 13 Left 2
WINDOW 3 33 -11 Left 2
SYMATTR InstName Cf2
SYMATTR Value 2.34n
SYMBOL cap -144 704 R90
WINDOW 0 3 80 VBottom 2
WINDOW 3 19 72 VTop 2
SYMATTR InstName C1
SYMATTR Value 2.34n
SYMBOL cap -176 176 R270
WINDOW 0 19 10 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C3
SYMATTR Value 2.1n
SYMBOL cap -224 480 R180
WINDOW 0 29 13 Left 2
WINDOW 3 33 -11 Left 2
SYMATTR InstName Cf4
SYMATTR Value 2.1n
TEXT 480 -176 Left 2 ;Simulation Commands
TEXT -704 -264 Left 4 ;************************************************\nCOMPSYS/ELECTENG 209 \nEnergy Monitor Schematic - Group 15\n \n20/10/2021\n************************************************
TEXT 1096 48 Left 2 ;Voltage Sens
TEXT 1672 -24 Left 2 ;5V regulator circuit design
TEXT 2008 32 Left 2 ;Offset voltage(5V) supplied to the Op-Amp
TEXT 848 640 Left 3 ;Voltage zero crossing detector circuit design
TEXT 488 -144 Left 2 !.lib LM324.lib
TEXT -672 72 Left 3 ;OpAmps & Filters
TEXT 488 -112 Left 2 !;tran 0 0.2 0 0.01
TEXT -592 1208 Left 1 ;Vvs has initial resistance which is why its different
TEXT -680 600 Left 1 ;R1 thevenin not considered as resistor too small
TEXT 856 48 Left 2 ;Current Sens
TEXT 2616 16 Left 2 ;2.1V DC Voltage Divider with Buffer
TEXT 552 400 Left 2 ;12.6 - 15.4 Vrms
TEXT 584 712 Left 2 ;Voltage comparators
TEXT 2872 112 Left 1 ;VD of\n27k/39k
TEXT -568 128 Left 2 ;Current Sensor Opamp
TEXT -576 640 Left 2 ;Voltage Sensor Opamp
TEXT 488 -80 Left 2 !.ic V(Vin) = 10
TEXT 712 -112 Left 2 !.ac dec 30 1 1Meg
TEXT 0 304 Left 2 ;V(visout)/V(Vis) equation for simulation
TEXT -16 896 Left 2 ;V(vvsout)/V(Vvs) equation for simulation
RECTANGLE Normal 1696 1232 544 672 2
RECTANGLE Normal 1056 512 816 64 2
RECTANGLE Normal 1280 512 1072 64 2
RECTANGLE Normal 2240 64 2112 144 2
RECTANGLE Normal 464 1248 -704 32 2
RECTANGLE Normal 3040 32 2608 272 2
RECTANGLE Normal 928 -48 464 -192 2
